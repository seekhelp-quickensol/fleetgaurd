<!-- lead details module -->

<div class="modal fade" id="lead_details_modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">

    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl">

        <div class="modal-content">

            <div class="modal-header">

                <h1 class="modal-title fs-5" id="exampleModalLabel">#1 - John Doe</h1>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>

            <div class="modal-body">



                <div class="row">

                    <div class="col-md-9 tab_sec">

                        <ul class="nav nav-tabs" id="myTabs">

                            <li class="nav-item">

                                <a class="nav-link active" id="profile-tab" data-bs-toggle="tab" href="#company">Company

                                    Details</a>

                            </li>

                            <li class="nav-item">

                                <a class="nav-link " id="contact-tab" data-bs-toggle="tab" href="#contact">Contact

                                    Details</a>

                            </li>

                            <li class="nav-item">

                                <a class="nav-link" id="lead-tab" data-bs-toggle="tab" href="#lead">Lead Info</a>

                            </li>

                            <li class="nav-item">

                                <a class="nav-link" id="project-tab" data-bs-toggle="tab" href="#project">Process &

                                    Machine</a>

                            </li>

                            <li class="nav-item">

                                <a class="nav-link" id="document-tab" data-bs-toggle="tab" href="#document">Document

                                    List</a>

                            </li>

                            <li class="nav-item">

                                <a class="nav-link" id="task-tab" data-bs-toggle="tab" href="#tasklist">Task List</a>

                            </li>



                        </ul>



                        <div class="tab-content mt-3">

                            <div class="tab-pane fade show active" id="company">

                                <div class="tab_sub_section">

                                    <div class="tab_sub_title">



                                    </div>

                                    <div class="row">

                                        <div class="col-xl-8 col-lg-8 col-md-8 col-sm-12">

                                            <div class="row flex_wrap">

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Company Name</label>

                                                    <p class="label_p">Infotect Solutions Pvt. Ltd.</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Business Segment</label>

                                                    <p class="label_p">Manufacturing</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Plant Name</label>

                                                    <p class="label_p">Infotect Industrial Unit - Pune</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Customer Type</label>

                                                    <p class="label_p">Wholesale</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Address</label>

                                                    <p class="label_p">Plot No. 45, MIDC Industrial Area, Hinjewadi

                                                        Phase 2, Pune</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>GST</label>

                                                    <p class="label_p">27AAACI1234F1Z5</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Region</label>

                                                    <p class="label_p">West India</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>PAN</label>

                                                    <p class="label_p">AAACI1234F</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>State</label>

                                                    <p class="label_p">Maharashtra</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>TIN</label>

                                                    <p class="label_p">27123456789</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Country</label>

                                                    <p class="label_p">India</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>SEZ</label>

                                                    <p class="label_p">No</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>Pincode</label>

                                                    <p class="label_p">411057</p>

                                                </div>

                                                <div class="form-group col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                                    <label>CIN</label>

                                                    <p class="label_p">U72900MH2010PTC123456</p>

                                                </div>

                                            </div>

                                        </div>





                                    </div>

                                </div>



                            </div>

                            <div id="contact" class="tab-pane fade">

                                <div class="tab_sub_section">



                                    <div class="tab_sub_title">



                                    </div>







                                    <div class="row flex_wrap">

                                        <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                            <label> Name</label>

                                            <p class="label_p"> John Doe</p>

                                        </div>

                                        <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                            <label>Departement </label>

                                            <p class="label_p"> Sales</p>

                                        </div>

                                        <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                            <label>Designation</label>

                                            <p class="label_p"> Senior Executive</p>

                                        </div>

                                        <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                            <label>Email</label>

                                            <p class="label_p"> johndoe@example.com</p>

                                        </div>

                                        <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                            <label>Mobile</label>

                                            <p class="label_p"> +91 98765 43210</p>

                                        </div>



                                    </div>









                                </div>

                            </div>



                            <div id="lead" class="tab-pane fade">

                                <div class="tab_sub_section">

                                    <div class="tab_sub_title">



                                    </div>

                                    <div class="row">



                                        <div class="form-group col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12">

                                            <label>Source</label>

                                            <p class="label_p">Source A</p>

                                        </div>

                                        <div class="form-group col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12">

                                            <label>Level</label>

                                            <p class="label_p">Level A</p>

                                        </div>

                                        <div class="form-group col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12">

                                            <label>PO Schedule</label>

                                            <p class="label_p">15/03/2025</p>

                                        </div>

                                        <div class="form-group col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12">

                                            <label>Delivery</label>

                                            <p class="label_p">Within 10 Working Days</p>

                                        </div>

                                        <div class="form-group col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12">

                                            <label>Budget (currency)</label>

                                            <p class="label_p">INR 10,00,000</p>

                                        </div>

                                        <div class="form-group col-xl-3 col-lg-3 col-md-4 col-sm-6 col-xs-12">

                                            <label>Competition</label>

                                            <p class="label_p">XYZ Solutions Pvt. Ltd.</p>

                                        </div>





                                    </div>



                                </div>

                            </div>

                            <div id="project" class="tab-pane fade">

                                <div class="tab_sub_section">



                                    <div class="tab_sub_title">



                                    </div>

                                    <div class="row">

                                        <div class="row flex_wrap">

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Project Name</label>

                                                <p class="label_p">Project-1</p>

                                            </div>

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Process Number</label>

                                                <p class="label_p">PRC-2025-008</p>

                                            </div>

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Process Name</label>

                                                <p class="label_p">Process-1</p>

                                            </div>

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Manufacturer</label>

                                                <p class="label_p">Sanyo Machine</p>

                                            </div>

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Machine Description</label>

                                                <p class="label_p">Axes NC Gear Chamfering M/C</p>

                                            </div>

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Model</label>

                                                <p class="label_p">TFG-300NC</p>

                                            </div>

                                            <div class="form-group col-xl-4 col-lg-4 col-md-4 col-sm-12 col-xs-12">

                                                <label>Quantity</label>

                                                <p class="label_p">3 </p>

                                            </div>

                                            <div class="form-group col-xl-8 col-lg-8 col-md-8 col-sm-12 col-xs-12">

                                                <label>Notes</label>

                                                <p class="label_p">Requires by May 2025</p>

                                            </div>

                                        </div>



                                        <div class="row p-2">

                                            <h6>Process Number Details</h6>

                                            <div class="example-tables mt-1 p-2"></div>



                                        </div>





                                    </div>



                                </div>

                            </div>

                            <div id="document" class="tab-pane fade">

                                <div class="tab_sub_section">

                                    <div class="tab_sub_title">

                                        <h5>Uploaded Documents</h5>

                                    </div>

                                    <div class="row">



                                        <!-- Document Item -->

                                        <div class="col-md-3 col-sm-4 col-xs-6 mb-4">

                                            <div class="card shape-card">

                                                <img src="<?= base_url() ?>admin_assets/images/xml-file.png"

                                                    class="shape_left">

                                                <div class="card-body text-center p-2">

                                                    <p class="card-text small mb-2">Quotation.pdf</p>

                                                    <a href="#" class="btn btn-sm btn-dark" target="_blank">View</a>

                                                    <a href="#" class="btn btn-sm btn-success">Download</a>

                                                </div>

                                            </div>

                                        </div>



                                        <!-- Document Item -->

                                        <div class="col-md-3 col-sm-4 col-xs-6 mb-4">

                                            <div class="card shape-card">

                                                <img src="<?= base_url() ?>admin_assets/images/xml-file.png"

                                                    class="shape_left">

                                                <div class="card-body text-center p-2">

                                                    <p class="card-text small mb-2">MachineLayout.png</p>

                                                    <a href="#" class="btn btn-sm btn-dark" target="_blank">View</a>

                                                    <a href="#" class="btn btn-sm btn-success">Download</a>

                                                </div>

                                            </div>

                                        </div>







                                        <!-- Add more document items as needed -->



                                    </div>

                                </div>

                            </div>



                            <div id="tasklist" class="tab-pane fade">

                                <div class="tab_sub_section">

                                    <button class="btn add-group-btn mb-3 mt-4 bg-dark text-white"

                                        onclick="openNewTaskModal()">

                                        <i class="fas fa-plus"></i>New Task

                                    </button>

                                    <div class="model-table"></div>

                                </div>



                            </div>



                        </div>

                    </div>

                    <div class="col-md-3">



                        <div class="timeline">

                            <div class="timeline-item right">

                                <div class="timeline-dot"></div>

                                <div class="timeline-content">

                                    <h6><span>Lead Generated</span></h6>

                                    <p>Customer has shown interest.</p>

                                    <div class="timeline-meta">

                                        <span class="timeline-date">2025-04-04</span>

                                        <span class="timeline-time">10:30 AM</span>

                                    </div>

                                </div>

                            </div>

                            <div class="timeline-item right">

                                <div class="timeline-dot"></div>

                                <div class="timeline-content">

                                    <h6><span>Contact Initiated</span></h6>

                                    <p>Sales team reached out.</p>

                                    <div class="timeline-meta">

                                        <span class="timeline-date">2025-04-04</span>

                                        <span class="timeline-time">10:30 AM</span>

                                    </div>

                                </div>

                            </div>

                            <div class="timeline-item right">

                                <div class="timeline-dot"></div>

                                <div class="timeline-content">

                                    <h6><span>Negotiation</span></h6>

                                    <p>Discussing terms and pricing.</p>

                                    <div class="timeline-meta">

                                        <span class="timeline-date">2025-04-04</span>

                                        <span class="timeline-time">10:30 AM</span>

                                    </div>

                                </div>

                            </div>

                            <div class="timeline-item right">

                                <div class="timeline-dot"></div>

                                <div class="timeline-content">

                                    <h6><span>Contact Initiated</span></h6>

                                    <p>Sales team reached out.</p>

                                    <div class="timeline-meta">

                                        <span class="timeline-date">2025-04-04</span>

                                        <span class="timeline-time">10:30 AM</span>

                                    </div>

                                </div>

                            </div>



                        </div>





                    </div>

                </div>



            </div>

        </div>

    </div>

</div>





<!-- New Task Modal -->

<div class="modal fade" id="new_task_modal" tabindex="-1" aria-labelledby="newTaskModalLabel" aria-hidden="true"

    data-bs-backdrop="static">

    <div class="modal-dialog modal-dialog-centered modal-md">

        <div class="modal-content">

            <div class="modal-header">

                <h5 class="modal-title">Add New Task</h5>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>

            <div class="modal-body">



                <form>

                    <div class="row">

                        <!-- Subject -->

                        <div class="mb-3 col-md-12">

                            <label for="taskSubject" class="form-label">Subject<b class="require">*</b></label>

                            <input type="text" class="form-control " id="taskSubject" placeholder="Enter subject">

                        </div>



                        <!-- Start Date -->

                        <div class="mb-3 col-md-6">

                            <label for="startDate" class="form-label">Start Date<b class="require">*</b></label>

                            <input type="date" class="form-control singledatepickers" id="startDate"

                                placeholder="Select Start Date">

                        </div>



                        <!-- End Date -->

                        <div class="mb-3 col-md-6">

                            <label for="endDate" class="form-label">End Date<b class="require">*</b></label>

                            <input type="date" class="form-control singledatepickers" id="endDate"

                                placeholder="Select End Date">

                        </div>



                        <!-- Priority -->





                        <div class="form-group col-md-6">

                            <label>Priority <b class="require">*</b></label>

                            <select class="form-control js-example-basic-single" name="priority" id="priority"

                                style="width:100%">

                                <option value="High">High</option>

                                <option value="Medium">Medium</option>

                                <option value="Low">Low</option>

                            </select>

                        </div>



                        <!-- Assign To -->





                        <div class="form-group col-md-6">

                            <label>Assign To <b class="require">*</b></label>

                            <select class="form-control js-example-basic-single" name="assignTo" id="assignTo"

                                style="width:100%" multiple>

                                <option value="1">John </option>

                                <option value="2">Smith</option>

                            </select>

                        </div>





                        <!-- Task Description -->

                        <div class="mb-3 col-12">

                            <label for="taskDescription" class="form-label">Task Description</label>

                            <textarea class="form-control " id="taskDescription" rows="3" style="height:auto"

                                placeholder="Describe the task..."></textarea>

                        </div>

                    </div>



                    <!-- Submit -->

                    <div class="text-end">

                        <button type="submit" class="btn btn-sm btn-dark">Save</button>

                    </div>

                </form>



            </div>

        </div>

    </div>

</div>



<!-- lead details -->

<div class="modal fade" id="checkboxModal" tabindex="-1" aria-labelledby="checkboxModalLabel" aria-hidden="true">

    <div class="modal-dialog modal-dialog-centered modal-xl">

        <div class="modal-content">

            <div class="modal-header">

                <h5 class="modal-title" id="checkboxModalLabel">Nihal Sharma: Total Leads (2)</h5>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>

            <div class="modal-body">

                <div class="management-table"></div>

            </div>

        </div>

    </div>

</div>



<!-- management details -->

<div class="modal fade" id="managementModal" tabindex="-1" aria-labelledby="managementLabel" aria-hidden="true">

    <div class="modal-dialog modal-dialog-centered modal-xl">

        <div class="modal-content">

            <div class="modal-header">

                <h5 class="modal-title" id="managementLabel">Management Details</h5>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>

            </div>

            <div class="modal-body">

                <div class="management-tbl"></div>

            </div>

        </div>

    </div>

</div>





</div>

<script src="<?= base_url() ?>admin_assets/js/jquery.js"></script>

<script src="<?= base_url() ?>admin_assets/js/bootstrap.bundle.min.js"></script>



<script src="<?= base_url() ?>admin_assets/js/dataTables.min.js"></script>
<script src="<?= base_url() ?>admin_assets/js/dataTables.buttons.js"></script>
<script src="<?= base_url() ?>admin_assets/js/buttons.dataTables.js"></script>
<script src="<?= base_url() ?>admin_assets/js/jszip.min.js"></script>
<script src="<?= base_url() ?>admin_assets/js/buttons.html5.min.js"></script>
<script src="<?= base_url() ?>admin_assets/js/buttons.print.min.js"></script>

<script src="<?= base_url() ?>admin_assets/js/jquery.validate.min.js"></script>

<script src="<?= base_url() ?>admin_assets/js/custom.js"></script>

<script src="<?= base_url() ?>admin_assets/js/flatpickr.js"></script>

<script src="<?= base_url() ?>admin_assets/js/tabulator.min.js"></script>

<script src="<?= base_url() ?>admin_assets/js/select2.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales-all.min.js"></script>

<script type="text/javascript" src="https://oss.sheetjs.com/sheetjs/xlsx.full.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.20/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>



<script>

    function openNewTaskModal() {

        const modalEl = document.getElementById('new_task_modal');

        const modal = new bootstrap.Modal(modalEl, {

            backdrop: 'static',

            keyboard: false

        });

        modal.show();

    }



    // Fix z-index stacking manually if needed

    document.addEventListener('shown.bs.modal', function(event) {

        let openModals = document.querySelectorAll('.modal.show');

        openModals.forEach((modal, i) => {

            modal.style.zIndex = 1050 + i * 10;

            let backdrop = document.querySelectorAll('.modal-backdrop')[i];

            if (backdrop) backdrop.style.zIndex = 1040 + i * 10;

        });

    });

</script>



<script>

    $(document).ready(function() {

        $("#dropdownBtn").click(function() {

            $("#filterDropdown").toggle();

        });



        $(document).click(function(e) {

            if (!$(e.target).closest(".search-container").length) {

                $("#filterDropdown").hide();

            }

        });



        $("#selectAll").change(function() {

            $(".column-checkbox").prop("checked", this.checked);

        });



        $("#filterSearch").on("keyup", function() {

            var value = $(this).val().toLowerCase();

            $("#columnList div").filter(function() {

                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);

            });

        });

    });

</script>

<script>

    document.addEventListener("DOMContentLoaded", function() {

        setTimeout(() => {

            document.querySelectorAll(".skeleton-container").forEach(loader => {

                loader.style.display = "none";

            });



            document.querySelectorAll(".skeleton").forEach(item => {

                item.classList.remove("skeleton");

                item.classList.add("fade-in");

                item.style.opacity = "1";

            });

        }, 1000);

    });

</script>



<script>

    $(window).on("load", function() {

        setTimeout(() => {

            $("#loader_div").hide();

        }, 800);

    });

    // datepicker

</script>



<script>

    $(".datepickers").flatpickr({

        mode: "range",

        dateFormat: "d-m-Y",

    });



    $(".singledatepickers").flatpickr({



        dateFormat: "d-m-Y",

    });

</script>



<script>

    $(document).ready(function() {

        $('.js-example-basic-single').select2();

    })

</script>



<script>

    $('#new_task_modal').on('shown.bs.modal', function() {

        $('#priority, #assignTo').select2({

            dropdownParent: $('#new_task_modal'),

            width: '100%',

            placeholder: 'Select an option',



        });

    });

</script>











<!-- tabulator model -->



<script>

    var rowData = [{

            id: 1,

            subject: "Lead-1",

            start_date: "02-04-2025",

            end_date: "12-04-2025",

            priority: "Priority-1",

            assign_to: "john doe",

            task_description: "Description-1",





        },

        {

            id: 2,

            subject: "Lead-2",

            start_date: "03-04-2025",

            end_date: "06-04-2025",

            priority: "Priority-2",

            assign_to: "john doe",

            task_description: "Description-2",



        },

        {

            id: 3,

            subject: "Lead-3",

            start_date: "04-04-2025",

            end_date: "08-04-2025",

            priority: "Priority-3",

            assign_to: "john doe",

            task_description: "Description-3",



        },

        {

            id: 4,

            subject: "Lead-4",

            start_date: "08-04-2025",

            end_date: "12-04-2025",

            priority: "Priority-4",

            assign_to: "john doe",

            task_description: "Description-4",



        },

        {

            id: 5,

            subject: "Lead-5",

            start_date: "12-04-2025",

            end_date: "14-04-2025",

            priority: "Priority-5",

            assign_to: "john doe",

            task_description: "Description-5",



        },

        {

            id: 6,

            subject: "Lead-5",

            start_date: "12-04-2025",

            end_date: "14-04-2025",

            priority: "Priority-5",

            assign_to: "john doe",

            task_description: "Description-5",



        },

        {

            id: 7,

            subject: "Lead-5",

            start_date: "12-04-2025",

            end_date: "14-04-2025",

            priority: "Priority-5",

            assign_to: "john doe",

            task_description: "Description-5",



        },

        {

            id: 8,

            subject: "Lead-5",

            start_date: "12-04-2025",

            end_date: "14-04-2025",

            priority: "Priority-5",

            assign_to: "john doe",

            task_description: "Description-5",



        },

        {

            id: 9,

            subject: "Lead-5",

            start_date: "12-04-2025",

            end_date: "14-04-2025",

            priority: "Priority-5",

            assign_to: "john doe",

            task_description: "Description-5",



        }



    ];



    var table = new Tabulator(".model-table", {



        layout: "fitDataStretch",

        pagination: true,

        paginationSize: 10,

        selectable: true,

        columns: [{

                titleFormatter: "rowSelection",

                formatter: function(cell) {

                    let row = cell.getRow();

                    if (row.getData().descriptionRow) return "";



                    let checkbox = document.createElement("input");

                    checkbox.type = "checkbox";

                    checkbox.classList.add("row-checkbox");





                    return checkbox;

                },

                hozAlign: "center",

                headerSort: false,

                width: 50

            },

            {

                title: "Subject",

                field: "subject",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Start Date",

                field: "start_date",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "End Date",

                field: "end_date",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Priority",

                field: "priority",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Assign To",

                field: "assign_to",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Task Description",

                field: "task_description",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },





        ],

        data: rowData,

    });

</script>

<script>

    let openTab = 'company';



    // Detect which tab to open based on the clicked element

    document.addEventListener('click', function(e) {

        const target = e.target.closest('[data-bs-toggle="modal"]');

        if (target && target.dataset.tab) {

            openTab = target.dataset.tab;

        } else {

            openTab = 'company'; // fallback to first tab

        }

    });



    // When modal is shown, activate the required tab

    document.getElementById('lead_details_modal').addEventListener('shown.bs.modal', function() {

        const tabId = {

            company: '#company-tab',

            contact: '#contact-tab',

            lead: '#lead-tab',

            project: '#project-tab',

            document: '#document-tab',

            task: '#task-tab'

        };



        if (tabId[openTab]) {

            const tabTrigger = new bootstrap.Tab(document.querySelector(tabId[openTab]));

            tabTrigger.show();

        }

    });





















    var projectData = [{

            id: 1,

            project_name: "Tesla",

            part_name: "Input Shaft",

            drawing_number: "AX4567890",

            qty: "25000",

            tact_time: "00:02:30",

            Material: "Entry",

            drawings: "Available",

            drawings_attached: "Available",

            action: ""

        },

        {

            id: 2,

            project_name: "Ford",

            part_name: "Gear Box",

            drawing_number: "BX1234567",

            qty: "18000",

            tact_time: "00:40:30",

            Material: "Steel",

            drawings: "Available",

            drawings_attached: "Available",

            action: ""

        },

        {

            id: 3,

            project_name: "Honda",

            part_name: "Brake Disc",

            drawing_number: "CX9876543",

            qty: "15000",

            tact_time: "00:06:30",

            Material: "Aluminum",

            drawings: "Available",

            drawings_attached: "Available",

            action: ""

        },

        {

            id: 4,

            project_name: "BMW",

            part_name: "Crankshaft",

            drawing_number: "DX5647382",

            qty: "12000",

            tact_time: "00:02:30",

            Material: "Iron",

            drawings: "Available",

            drawings_attached: "Available",

            action: ""

        },

        {

            id: 5,

            project_name: "Audi",

            part_name: "Piston",

            drawing_number: "EX1928374",

            qty: "10000",

            tact_time: "00:11:30",

            Material: "Titanium",

            drawings: "Available",

            drawings_attached: "Available",

            action: ""

        }

    ];



    var table = new Tabulator(".example-tables", {



        layout: "fitDataStretch",

        pagination: true,

        paginationSize: 10,

        selectable: true,

        columns: [{

                titleFormatter: "rowSelection",

                formatter: function(cell) {

                    let row = cell.getRow();

                    if (row.getData().descriptionRow) return "";



                    let checkbox = document.createElement("input");

                    checkbox.type = "checkbox";

                    checkbox.classList.add("row-checkbox");







                    return checkbox;

                },

                hozAlign: "center",

                headerSort: false,

                width: 50

            },

            {

                title: "Project Name",

                field: "project_name",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Part Name",

                field: "part_name",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Drawing Number",

                field: "drawing_number",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Production Qty/Month",

                field: "qty",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Tact Time",

                field: "tact_time",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Material",

                field: "Material",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Drawings",

                field: "drawings",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Drawings Attached",

                field: "drawings_attached",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Action",

                field: "action",

                width: 250,

                hozAlign: "center",

                formatter: function(cell, formatterParams) {

                    return `

             

                    <button class="btn btn-sm btn-danger delete-row">Delete</button>

                `;

                },

                cellClick: function(e, cell) {

                    let row = cell.getRow();

                    if (e.target.classList.contains("delete-row")) {

                        row.delete(); // Delete row

                    }



                }

            }

        ],

        data: projectData,

    });

</script>









<script>

    $(document).ready(function() {

        // Get the current URL

        let currentUrl = window.location.href;





        $(".master_tabs .dropdown-item").each(function() {



            if (currentUrl.includes($(this).attr("href"))) {

                $(this).addClass("active-link");

            }

        });

    });

</script>





<script>

    $('.toggle_password').click(function() {

        if ($('.toggle_password i').hasClass('fa-eye-slash')) {

            $('.toggle_password i').removeClass('fa-eye-slash');

            $('.toggle_password i').addClass('fa-eye');

            $('#password').attr('type', 'text');

        } else {

            $('.toggle_password i').removeClass('fa-eye');

            $('.toggle_password i').addClass('fa-eye-slash');



            $('#password').attr('type', 'password');



        }

    })

</script>













<script>

    var leadData = [{

            id: 1,

            name: "Nihal Sharma",



            project_name: "Project 1",

            manufacture: "Sanyo Machine ",

            mc_description: "Axes NC Gear Chamfering M/C",

            enquiry_number: "ENQ-001",

            model: "TFG-100NCV",

            qty: "2",

            contact_person: "Aaditya",

            quotation: "Submited",

            quotation_date: "23-04-2025",

            qtn_nr: "test1",

            spec: "Submited",

            c_t: "00:02:30",

            c_t_status: "Pending",

            layout: "Submited",

            notes: "testing-data"



        },

        {

            id: 2,

            name: "Nihal Sharma",

            project_name: "Project 2",

            manufacture: "Yasda Machine ",

            mc_description: "Axes CNC Gear Deburring M/C",

            enquiry_number: "ENQ-002",

            model: "TFG-200NCHS",

            qty: "4",

            contact_person: "Aashish",

            quotation: "Pending ( Arhan)",

            quotation_date: "28-04-2025",

            qtn_nr: "test2",

            spec: "Pending ( Arhan)",

            c_t: "00:02:30",

            c_t_status: "Submited",

            layout: "Pending ( Arhan)",

            notes: "testing-data"



        },















    ];











    var table = new Tabulator(".management-table", {

        height: "100%",

        layout: "fitDataStretch",

        pagination: true,

        paginationSize: 10,

        selectable: true,

        columns: [{

                title: "Sr.No",

                formatter: "rownum",

                hozAlign: "center",

                headerSort: false,

                width: 50

            },

            {

                title: "Customer Name",

                field: "name",

                width: 250,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Name",

                formatter: function(cell) {

                    let value = cell.getValue();

                    let row = cell.getRow();

                    let rowId = row.getIndex();

                    if (row.getData().descriptionRow) {

                        return `<strong>${value}</strong>`;

                    }



                    return `

            <span >

                ${value}

            </span>

            <span class="dropdown-toggle" style="cursor:pointer; float:left; margin-left: 8px;"></span>

           

        `;

                },

                cellClick: function(e, cell) {

                    const clickedElement = e.target;

                    const row = cell.getRow();

                    const rowEl = row.getElement();

                    const toggleIcon = cell.getElement().querySelector(".dropdown-toggle");

                    const existingDetails = rowEl.querySelector(".subrow-container");





                    if (clickedElement.classList.contains("customer-name-link")) {

                        const data = row.getData();

                        const modalTitle = document.getElementById("exampleModalLabel");

                        if (modalTitle) {

                            modalTitle.textContent = `Lead Details - ${data.name}`;

                        }

                        const modal = new bootstrap.Modal(document.getElementById('lead_details_modal'));

                        modal.show();

                        return;

                    }



                    if (clickedElement.classList.contains("dropdown-toggle")) {

                        document.querySelectorAll(".subrow-container").forEach(el => el.remove());

                        document.querySelectorAll(".dropdown-toggle.collaps").forEach(icon => icon.classList

                            .remove("collaps"));



                        if (existingDetails) {

                            existingDetails.remove();

                            toggleIcon.classList.remove("collaps");

                        } else {

                            let subrow = document.createElement("div");

                            subrow.className = "subrow-container row fade-in";

                            subrow.innerHTML = `

                    <div class="col-3" style="background-color: #ffe0cc; padding: 10px;">

                        <strong>Customer Name:</strong> ABC Corp<br>

                        <strong>Plant Name:</strong> XYZ Plant<br>

                        <strong>Customer ID:</strong> CUST12345

                    </div>

                    <div class="col-3" style="background-color: #fff4cc; padding: 10px;">

                        <strong>Business Segment:</strong> Manufacturing<br>

                        <strong>Region:</strong> North America<br>

                        <strong>Address:</strong> 123 Industrial Road, City, Country<br>

                        <strong>State:</strong> California<br>

                        <strong>Pin Code:</strong> 987654<br>

                        <strong>Country:</strong> USA

                    </div>

                    <div class="col-3" style="background-color: #e6f7ff; padding: 10px;">

                        <strong>PAN:</strong> ABCDE1234F<br>

                        <strong>TIN:</strong> 123456789<br>

                        <strong>CIN:</strong> L12345MH1234PLC123456<br>

                        <strong>GST:</strong> 12ABCDE3456F1Z7<br>

                        <strong>SEZ:</strong> Yes

                    </div>

                `;

                            subrow.style.padding = "10px";

                            subrow.style.backgroundColor = "#f9f9f9";

                            subrow.style.fontStyle = "italic";

                            subrow.style.borderTop = "1px solid #ddd";

                            subrow.style.marginTop = "5px";



                            rowEl.appendChild(subrow);

                            toggleIcon.classList.add("collaps");

                        }

                    }

                }

            },









            {

                title: "Project Name",

                field: "project_name",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by project name",

                formatter: function(cell) {

                    let value = cell.getValue();

                    let row = cell.getRow();

                    return row.getData().descriptionRow ?

                        `<strong>${value}</strong>` :

                        `${value} <span class="dropdown-toggle" style="cursor:pointer; float:left;"></span>`;

                },

                cellClick: function(e, cell) {

                    let row = cell.getRow();

                    let rowEl = row.getElement();

                    let toggleIcon = cell.getElement().querySelector(".dropdown-toggle");

                    let existingDetails = rowEl.querySelector(".subrow-container");





                    document.querySelectorAll(".subrow-container").forEach(el => el.remove());

                    document.querySelectorAll(".dropdown-toggle.collaps").forEach(icon => icon.classList

                        .remove("collaps"));





                    if (existingDetails) {



                        return;

                    }





                    let subrow = document.createElement("div");

                    subrow.className = "subrow-container";

                    subrow.innerHTML = `

                    <div class="row fade-in">

                        <!-- Contact Person Section -->

                        <div class="col-3" style="background-color: #ffe0cc; padding: 10px;">

                            <strong>Contact Person</strong><br>

                            <strong>Name:</strong> John Doe<br>

                            <strong>Department:</strong> Sales<br>

                            <strong>Designation:</strong> Manager<br>

                            <strong>Email:</strong> john.doe@example.com<br>

                            <strong>Mobile:</strong> +1234567890

                        </div>



                        <!-- Enquiry Section -->

                        <div class="col-3" style="background-color: #fff4cc; padding: 10px;">

                            <strong>Enquiry</strong><br>

                            <strong>Source:</strong> Website<br>

                            <strong>Level:</strong> High<br>

                            <strong>PO Schedule:</strong> Q2 2025<br>

                            <strong>Delivery:</strong> 30 Days<br>

                            <strong>Budget:</strong> $50,000<br>

                            <strong>Competition:</strong> Competitor XYZ

                        </div>



                        <!-- Process & Machine Section -->

                        <div class="col-3" style="background-color: #e6f7ff; padding: 10px;">

                            <strong>Process & Machine</strong><br>

                            <strong>Process Number:</strong> P12345<br>

                            <strong>Process Name:</strong> Injection Molding<br>

                            <strong>Manufacturer:</strong> ABC Machines<br>

                            <strong>Machine Description:</strong> High-Speed Molding Machine<br>

                            <strong>Model:</strong> XYZ-5000<br>

                            <strong>Quantity:</strong> 2<br>

                            <strong>Notes:</strong> Requires additional cooling system.

                        </div>

                    </div>

                    `;



                    subrow.style.padding = "10px";

                    subrow.style.backgroundColor = "#f9f9f9";

                    subrow.style.fontStyle = "italic";

                    subrow.style.borderTop = "1px solid #ddd";

                    subrow.style.marginTop = "5px";



                    rowEl.appendChild(subrow);

                    toggleIcon.classList.add("collaps");

                }

            },



            {

                title: "Manufacturer",

                field: "manufacture",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Manufacturer",



            },

            {

                title: "M/C Description",

                field: "mc_description",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by M/C Description",



            },

            {

                title: "Enquiry Number",

                field: "enquiry_number",

                width: 150,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Enquiry Number",

            },



            {

                title: "Model",

                field: "model",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by model",







            },

            {

                title: "Qty",

                field: "qty",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by qty"



            },







            {

                title: "Contact Person",

                field: "contact_person",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Contact Person",



            },

            {

                title: "Quotation ",

                field: "quotation",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Quotation "

            },



















            {

                title: "Quotation Date",

                field: "quotation_date",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Quotation Date"

            },



            {

                title: "Quotation NR. (Type)",

                field: "qtn_nr",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Quotation NR. (Type)"

            },

            {

                title: "Specififcation",

                field: "spec",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Specififcation"

            },

            {

                title: "C/T",

                field: "c_t",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by C/T"

            },

            {

                title: "C/T Status",

                field: "c_t_status",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by C/T Status"

            },

            {

                title: "Layout",

                field: "layout",

                hozAlign: "center",

                width: 130,

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Layout"

            },

            {

                title: "Notes",

                field: "notes",

                width: 200,

                hozAlign: "center",

                headerFilter: "input",

                headerFilterPlaceholder: "Search by Notes",



            }



        ],



        data: leadData,



        rowFormatter: function(row) {

            let data = row.getData();

            if (data.descriptionRow) {

                row.getElement().style.backgroundColor = "#f9f9f9";

                row.getElement().style.fontStyle = "italic";



                // Merge columns

                let cells = row.getElement().querySelectorAll("div");

                if (cells.length > 1) {

                    cells.forEach((cell, index) => {

                        if (index > 1) cell.remove();

                    });

                    cells[0].setAttribute("colspan", table.getColumns().length);

                }

            }

        }



    });

</script>





<!-- management details  -->

<script>

    var managementData = [{

            id: 1,

            Member_name: "Nishant Sinha",

            deapartment: "Sales",

            designation: "Manager",

            email: "nishant12@gmail.com",

            phone: "+91 1234567890",

            action: ""

        },

        {

            id: 2,

            Member_name: "Nishant Sinha",

            deapartment: "Sales",

            designation: "Manager",

            email: "nishant12@gmail.com",

            phone: "+91 1234567890",

            action: ""

        },

        {

            id: 3,

            Member_name: "Nishant Sinha",

            deapartment: "Sales",

            designation: "Manager",

            email: "nishant12@gmail.com",

            phone: "+91 1234567890",

            action: ""

        },



    ];



    var table = new Tabulator(".management-tbl", {



        layout: "fitDataStretch",

        pagination: true,

        paginationSize: 10,

        selectable: true,

        columns: [{

                title: "SR NO",

                formatter: function(cell) {

                    let row = cell.getRow();

                    if (row.getData().descriptionRow) return "";





                    let rows = cell.getTable().getRows("active");





                    let index = rows.indexOf(row);



                    return index + 1;

                },

                hozAlign: "center",

                headerSort: false,

                width: 50

            },









            {

                title: "Member Name",

                field: "Member_name",

                width: 150,

                hozAlign: "center",

                headerFilter: "input",



            },



            {

                title: "Deapartment",

                field: "deapartment",

                width: 150,

                hozAlign: "center",

                headerFilter: "input",



            },



            {

                title: "Designation",

                field: "designation",

                width: 150,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Email",

                field: "email",

                width: 150,

                hozAlign: "center",

                headerFilter: "input",



            },

            {

                title: "Phone",

                field: "phone",

                width: 150,

                hozAlign: "center",

                headerFilter: "input",



            },



            {

                title: "Action",

                field: "action",

                width: 250,

                hozAlign: "center",

                formatter: function(cell, formatterParams) {

                    return `

                  <button class="btn btn-sm btn-danger delete-row">Delete</button>

                `;

                },

                cellClick: function(e, cell) {

                    let row = cell.getRow();

                    if (e.target.classList.contains("delete-row")) {

                        row.delete();

                    }



                }

            }

        ],

        data: managementData,

    });

</script>



<script>

    $(document).ready(function() {

        $("#u-link").click(function(e) {

            e.preventDefault();

            $(this).next(".sidebar-dropdown").slideToggle().toggleClass('act');

            $('.dropdown-arrow').addClass('rotate')

        });

    });

</script>

<!-- model -->

<?php if ($this->session->flashdata('success') != "") { ?>



    <div id="gen-alert" class="alert alert-success animated fadeInUp" style="color:#297401;">



        <strong style="color:#297401; "> <?= $this->session->flashdata('success') ?></strong>



    </div>



<?php } else if ($this->session->flashdata('message') != "") { ?>



    <div id="gen-alert" class="alert alert-danger animated fadeInUp">



        <strong> <?= $this->session->flashdata('message') ?></strong>



    </div>



<?php } elseif (validation_errors() != '') { ?>



    <div id="gen-alert" class="alert alert-danger animated fadeInUp">



        <strong> <?= validation_errors() ?></strong>



    </div>



<?php } ?>



<script>

    // $(".alert").fadeTo(5000, 500).slideUp(500, function() {
    //     $(".alert").slideUp(500);
    // });

</script>

</body>



</html>